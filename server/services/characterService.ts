import { client } from "../database";

export { characterService }

const characterService = { getCharacterById, getCharacters }

async function getCharacterById(id: string) {
    const characters = (await client.query(`SELECT id, name FROM characters WHERE id=${id}`)).rows
    if (characters.length > 0) {
        return characters[0]
    } else {
        throw new Error(`Cannot find character for id ${id}`);
    }
}

async function getCharacters() {
    const characters = await client.query(`SELECT id, name FROM characters`)
    return characters.rows
}