import { challengeNameType } from "../challenges"

export { challenges }

const challenges = {
    getIsFlagFound,
    setIsFlagFound
}

const IS_FLAG_FOUND_BASE_KEY = "IS_FLAG_FOUND_KEY-";

function getIsFlagFound({ userName, challengeName }: { userName: string, challengeName: challengeNameType }) {
    return convertStringToBoolean(localStorage.getItem(buildItemKey({ userName, challengeName })) || "");
}

function setIsFlagFound({ userName, challengeName }: { userName: string, challengeName: challengeNameType }, value: boolean) {
    return localStorage.setItem(buildItemKey({ userName, challengeName }), convertBooleanToString(value));
}

function buildItemKey({ userName, challengeName }: { userName: string, challengeName: challengeNameType }) {
    return IS_FLAG_FOUND_BASE_KEY + "_" + userName + "_" + challengeName
}

function convertBooleanToString(value: boolean) {
    return value.toString()
}

function convertStringToBoolean(value: string) {
    return value !== "false" && !!value
}