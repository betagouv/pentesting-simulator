import React, { ChangeEvent, FormEvent, useState } from 'react'
import { useNavigate } from "react-router-dom";
import { routes } from '../routes';
import { storage } from '../services';

export { Login }

function Login() {
    const [userName, setUserName] = useState("");
    const navigate = useNavigate()
    return (<>
        <form onSubmit={onSubmit}>
            <label htmlFor="userName" >Ins√©rez votre nom d'utilisateur :</label>
            <input id="userName" name="userName" value={userName} onChange={onChangeUserName} />
            <button type="submit">Soumettre</button>
        </form>
    </>)

    function onChangeUserName(e: ChangeEvent<HTMLInputElement>) {
        setUserName(e.target.value);
    }

    async function onSubmit(event: FormEvent<HTMLFormElement>) {
        event.preventDefault();
        storage.user.setUserName(userName);
        navigate(routes["challenge-list"].getPath())
    }
}