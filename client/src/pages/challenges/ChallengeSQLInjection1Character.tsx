import React from "react"
import { Card, CardDescription, CardTitle, Container } from "@dataesr/react-dsfr";
import { useQuery } from "react-query";
import { useParams } from "react-router-dom";
import { getCharacterById } from "../../api";
import { Header } from "../../components";

export { ChallengeSQLInjection1Character }

type characterType = {
    id: number,
    name: string,
}
function ChallengeSQLInjection1Character() {
    const params = useParams<{ id: string }>();
    const query = useQuery<unknown, unknown, characterType | null>('challengeSQLInjection1Character', async () => {
        if (params.id) {
            const { data } = await getCharacterById(Number(params.id));
            return data
        }
        return null
    })

    if (query.data) {
        return <>
            <Header />
            <Container spacing="m-5w">
                <Card>
                    <CardTitle>
                        Profil de l'utilisateur
                    </CardTitle>
                    <CardDescription>
                        <span>ID: {query.data.id}</span><br />
                        <span>Nom: {query.data.name}</span>
                    </CardDescription>
                </Card>
            </Container>
        </>

    } else {
        if (query.isLoading) {
            return <p>RequÃªte en cours</p>
        } else {
            return <p>Une erreur est survenue lors de l'appel</p>
        }
    }

}
