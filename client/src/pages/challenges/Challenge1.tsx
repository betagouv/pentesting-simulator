import React, { ChangeEvent, FormEvent, useState } from "react"
import { submitPhrase } from "../../api";
import { Header, Hints } from "../../components";

export { Challenge1 }

function Challenge1() {
    const [phrase, setPhrase] = useState(0);
    return <>
        <Header title="Challenge 1" />
        <p>Essayez de soumettre <em>via</em> ce formulaire le texte suivant : <strong>Un chasseur sachant chasser sans son chien est un sacr√© chasseur</strong></p>
        <form onSubmit={onSubmit}>
            <input type="number" name="phrase" value={phrase} onChange={onChangePhrase} />
            <button type="submit">Soumettre</button>
        </form>
        <Hints hints={[]} />
    </>

    function onChangePhrase(e: ChangeEvent<HTMLInputElement>) {
        const newValue = Number(e.target.value);

        if (!isNaN(newValue)) {
            setPhrase(newValue)
        }
    }

    async function onSubmit(event: FormEvent<HTMLFormElement>) {
        event.preventDefault();
        const { data } = await submitPhrase(phrase)
        if (!data) {
            alert(`Erreur ! Essaie encore :)`)
        }
    }

}
