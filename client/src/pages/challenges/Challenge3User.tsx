import React, { useEffect, useState } from "react"
import { useParams } from "react-router-dom";
import { getUserById } from "../../api";

export { Challenge3User }

type userType = {
    id: number,
    name: string,
}
function Challenge3User() {
    const params = useParams<{ id: string }>();
    const [user, setUser] = useState<userType | undefined>();

    useEffect(() => {
        if (params.id) {
            getUserById(Number(params.id)).then(({ data }) => {
                if (data) {
                    setUser(data as userType)
                }
            })
        }
    }, [])

    return user ? <><header>Profil de l'utilisateur nÂ°{user.id}</header><p>Nom : {user.name}</p></> : <p>Chargement en cours...</p>
}

// Solution : http://localhost:3001/api/users/2 UNION SELECT id, hashedPassword FROM users WHERE id=2