import React, { ChangeEvent, FormEvent, useState } from "react"
import { touchEndpoint } from "../../../api";

export { Challenge1 }

function Challenge1() {
    const [login, setLogin] = useState("");
    const [password, setPassword] = useState("");
    return <>
        <header>Challenge 1</header>
        <p>Essayez de soumettre ce formulaire pour remplir le challenge.</p>
        <form onSubmit={onSubmit}>
            <input name="login" value={login} onChange={onChangeLogin} />
            <input name="password" type="password" value={password} onChange={onChangePassword} />
            <button type="submit" disabled>Soumettre</button>
        </form>
    </>

    function onChangeLogin(e: ChangeEvent<HTMLInputElement>) {
        setLogin(e.target.value)
    }

    function onChangePassword(e: ChangeEvent<HTMLInputElement>) {
        setPassword(e.target.value)
    }

    async function onSubmit(event: FormEvent<HTMLFormElement>) {
        event.preventDefault();
        const { data } = await touchEndpoint()
        if (data) {
            alert(`Challenge r√©ussi ! Le flag de ce challenge vaut : ${data}`)
        }
    }

}
