import React, { useEffect, useState } from "react"
import { useParams } from "react-router-dom";
import { getCharacterById } from "../../api";

export { Challenge3Character }

type characterType = {
    id: number,
    name: string,
}
function Challenge3Character() {
    const params = useParams<{ id: string }>();
    const [character, setCharacter] = useState<characterType | undefined>();

    useEffect(() => {
        if (params.id) {
            getCharacterById(Number(params.id)).then(({ data }) => {
                if (data) {
                    setCharacter(data as characterType)
                }
            })
        }
    }, [])

    return character ? <><header>Profil de l'utilisateur nÂ°{character.id}</header><p>Nom : {character.name}</p></> : <p>Chargement en cours...</p>
}

// Solution : http://localhost:3001/api/characters/2 UNION SELECT id, hashedPassword FROM characters WHERE id=2