import axios from "axios"

export { fetchApi }

const BASE_URL = "http://localhost:3001/api/"

async function fetchApi<responseT>(route: string): Promise<{ data: responseT | null, status: number }> {
    const url = buildUrl(route);
    try {
        const { data, status } = await axios(url);
        return { data, status };
    } catch (error: any) {
        console.warn(error)
        const status = error?.response?.status;
        return { data: null, status: isNaN(status) ? 500 : status }
    }
}

function buildUrl(route: string) {
    return BASE_URL + route;
}