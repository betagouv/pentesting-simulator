import { BrowserRouter, Navigate, Route, Routes, } from 'react-router-dom';
import { Challenge2SetAdminCookie, Challenge3Character, ChallengeList, Login } from './pages';
import { challenges } from './challenges';
import { storage } from './services';

export { Router }

function Router() {
    const hasUserName = !!storage.user.getUserName();
    return <BrowserRouter>
        <Routes>
            {challenges.map(({ component, path, name }) => <Route key={name} path={path} element={component} />)}
            <Route path="/challenge2-set-admin-cookies" element={<Challenge2SetAdminCookie />} />
            <Route path="/challenge3/characters/:id" element={<Challenge3Character />} />
            <Route path="/challenge-list" element={<ChallengeList />} />
            <Route path="/login" element={<Login />} />
            <Route path="/" element={<Navigate to={hasUserName ? "/challenge-list" : "/login"} />} />
        </Routes>
    </BrowserRouter>
}